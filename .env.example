# ==============================================
# Timeline App - Environment Variables Template
# ==============================================
# Copy this file to .env and fill in your values

# ----------------------------------------------
# General Settings
# ----------------------------------------------
NODE_ENV=development
PORT=3001
WEB_PORT=3000

# ----------------------------------------------
# API Server Origin (for web app proxy)
# ----------------------------------------------
# Development: http://localhost:3001
# Production: https://your-api-domain.onrender.com
API_SERVER_ORIGIN=http://localhost:3001

# ----------------------------------------------
# Database Connection
# ----------------------------------------------
# Local development example (PostgreSQL)
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/timeline

# Production example (from Render/Railway/etc)
# DATABASE_URL=postgresql://user:password@host:port/database?sslmode=require

# ----------------------------------------------
# Session Configuration
# ----------------------------------------------
# IMPORTANT: Use a strong secret in production (32+ characters)
# Generate with: openssl rand -base64 32
SESSION_SECRET=dev-secret-change-in-production-to-random-32-chars

# Session duration in milliseconds (default: 7 days)
SESSION_TTL_MS=604800000

# Session cookie name (default: timeline.sid)
SESSION_COOKIE_NAME=timeline.sid

# Session cookie SameSite policy (lax|strict|none)
SESSION_COOKIE_SAMESITE=lax

# ----------------------------------------------
# NextAuth + Google OAuth (Web App)
# ----------------------------------------------
# Required for Google sign-in on /connect and selection pages.
# NEXTAUTH_URL should match your deployed base URL in production.
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=dev-secret-change-in-production-to-random-32-chars
GOOGLE_CLIENT_ID=your-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-client-secret
# Scopes for Gmail + Drive metadata reads + Drive folder provisioning.
GOOGLE_SCOPES=https://www.googleapis.com/auth/gmail.readonly https://www.googleapis.com/auth/drive.readonly https://www.googleapis.com/auth/drive.file
# Optional base URL for app links.
APP_BASE_URL=http://localhost:3000

# ----------------------------------------------
# Phase 2A Summaries to Drive
# ----------------------------------------------
# No additional environment variables are required for deterministic summaries.
# Summaries will be written to the provisioned Drive folder as Markdown + JSON files.

# ----------------------------------------------
# Legacy Google OAuth Configuration
# ----------------------------------------------
# Get these from: https://console.cloud.google.com
# 1. Create project
# 2. Enable Gmail API and Google Drive API
# 3. Create OAuth 2.0 credentials
GOOGLE_OAUTH_CLIENT_ID=your-client-id.apps.googleusercontent.com
GOOGLE_OAUTH_CLIENT_SECRET=your-client-secret
GOOGLE_OAUTH_REDIRECT_URI=http://localhost:3000/api/auth/callback

# Production redirect URI (update when deployed):
# GOOGLE_OAUTH_REDIRECT_URI=https://your-domain.vercel.app/api/auth/callback

# ----------------------------------------------
# Encryption Configuration (REQUIRED)
# ----------------------------------------------
# Generate with: openssl rand -base64 32
ENCRYPTION_KEY_BASE64=your-base64-encoded-32-byte-key

# Key version for rotation support
KEY_VERSION=1

# Alternative: Use keyring for multiple keys (JSON array)
# ENCRYPTION_KEYRING_JSON=[{"version":1,"key":"base64-key-1"},{"version":2,"key":"base64-key-2"}]

# ----------------------------------------------
# OpenAI Configuration
# ----------------------------------------------
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key

# Optional: Stub mode for testing (DO NOT USE IN PRODUCTION)
# OPENAI_STUB=false

# ----------------------------------------------
# Admin Configuration
# ----------------------------------------------
# Comma-separated list of admin email addresses
ADMIN_EMAILS=your-email@example.com,another-admin@example.com

# ----------------------------------------------
# CORS Configuration (for cross-origin setups)
# ----------------------------------------------
# Only needed if web and API are on different origins
# CORS_ALLOWED_ORIGINS=https://your-domain.vercel.app,https://www.your-domain.com

# ----------------------------------------------
# CSRF Configuration
# ----------------------------------------------
# CSRF cookie name (default: timeline.csrf)
CSRF_COOKIE_NAME=timeline.csrf

# ----------------------------------------------
# Google Drive Adapter
# ----------------------------------------------
# Use "google" for real Drive integration (production)
# Leave unset or use "stub" for testing without Drive
DRIVE_ADAPTER=google

# Service account credentials (optional, for server-side Drive access)
# GOOGLE_DRIVE_CLIENT_EMAIL=your-service-account@project.iam.gserviceaccount.com
# GOOGLE_DRIVE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n"

# ----------------------------------------------
# Development/Testing Only (DO NOT USE IN PRODUCTION)
# ----------------------------------------------
# These should NEVER be set in production

# Allow shim packages in restricted environments
# SHIM_ALLOW=0

# Use stub Google API (no real API calls)
# GOOGLE_API_STUB=false

# ----------------------------------------------
# Vercel-specific (Web App)
# ----------------------------------------------
# Public API base URL for client-side requests
NEXT_PUBLIC_API_BASE=/api

# Public app base URL
# NEXT_PUBLIC_APP_BASE_URL=https://your-domain.vercel.app

# ----------------------------------------------
# Quick Start Commands
# ----------------------------------------------
# 1. Copy this file: cp .env.example .env
# 2. Fill in the values above
# 3. Install dependencies: pnpm install
# 4. Generate Prisma client: pnpm db:generate
# 5. Run migrations: pnpm db:migrate
# 6. Start API: pnpm dev:api
# 7. Start Web: pnpm dev:web
